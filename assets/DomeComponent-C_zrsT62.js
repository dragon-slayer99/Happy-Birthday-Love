import{n as e,o as t,t as n}from"./index-luaE414U.js";var r=t(e());function i(e,t,n){return Math.max(t,Math.min(e,n))}var a={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function o(e,t,n){return t===0||Math.abs(t)===1/0?e**(n*5):e*t*n/(t+n*e)}function s(e,t,n,r=.15){return r===0?i(e,t,n):e<t?-o(t-e,n-t,r)+t:e>n?+o(e-n,n-t,r)+n:e}function c(e,[t,n],[r,i]){let[[a,o],[c,l]]=e;return[s(t,a,o,r),s(n,c,l,i)]}function l(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function u(e){var t=l(e,`string`);return typeof t==`symbol`?t:String(t)}function d(e,t,n){return t=u(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?f(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m={pointer:{start:`down`,change:`move`,end:`up`},mouse:{start:`down`,change:`move`,end:`up`},touch:{start:`start`,change:`move`,end:`end`},gesture:{start:`start`,change:`change`,end:`end`}};function h(e){return e?e[0].toUpperCase()+e.slice(1):``}var g=[`enter`,`leave`];function _(e=!1,t){return e&&!g.includes(t)}function v(e,t=``,n=!1){let r=m[e],i=r&&r[t]||t;return`on`+h(e)+h(i)+(_(n,i)?`Capture`:``)}var y=[`gotpointercapture`,`lostpointercapture`];function b(e){let t=e.substring(2).toLowerCase(),n=!!~t.indexOf(`passive`);n&&(t=t.replace(`passive`,``));let r=y.includes(t)?`capturecapture`:`capture`,i=!!~t.indexOf(r);return i&&(t=t.replace(`capture`,``)),{device:t,capture:i,passive:n}}function x(e,t=``){let n=m[e],r=n&&n[t]||t;return e+r}function S(e){return`touches`in e}function C(e){return S(e)?`touch`:`pointerType`in e?e.pointerType:`mouse`}function w(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)==null||(r=n.contains)==null?void 0:r.call(n,t.target))})}function T(e){return e.type===`touchend`||e.type===`touchcancel`?e.changedTouches:e.targetTouches}function E(e){return S(e)?T(e)[0]:e}function D(e,t){try{let n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,o=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:o,origin:[i,a]}}catch{}return null}function O(e){return w(e).map(e=>e.identifier)}function k(e,t){let[n,r]=Array.from(e.touches).filter(e=>t.includes(e.identifier));return D(n,r)}function A(e){let t=E(e);return S(e)?t.identifier:t.pointerId}function j(e){let t=E(e);return[t.clientX,t.clientY]}var M=40,N=800;function P(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return r===1?(t*=M,n*=M):r===2&&(t*=N,n*=N),[t,n]}function F(e){let{scrollX:t,scrollY:n,scrollLeft:r,scrollTop:i}=e.currentTarget;return[t??r??0,n??i??0]}function I(e){let t={};if(`buttons`in e&&(t.buttons=e.buttons),`shiftKey`in e){let{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}function L(e,...t){return typeof e==`function`?e(...t):e}function ee(){}function R(...e){return e.length===0?ee:e.length===1?e[0]:function(){let t;for(let n of e)t=n.apply(this,arguments)||t;return t}}function z(e,t){return Object.assign({},t,e||{})}var B=32,te=class{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?L(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,I(e)),r.down=r.pressed=r.buttons%2==1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let e=t._delta.map(Math.abs);a.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);let[o,s]=t._movement,[l,u]=n.threshold,{_step:d,values:f}=t;if(n.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&f[0]),d[1]===!1&&(d[1]=Math.abs(s)>=u&&f[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(s)>=u&&Math.sign(s)*u)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;let p=[0,0];if(n.hasCustomTransform){let[e,t]=f;p[0]=d[0]===!1?0:e-d[0],p[1]=d[1]===!1?0:t-d[1]}else p[0]=d[0]===!1?0:o-d[0],p[1]=d[1]===!1?0:s-d[1];this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);let m=t.offset,h=t._active&&!t._blocked||t.active;h&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&(`bounds`in n&&(t._bounds=L(n.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));let[g,_]=t.offset,[[v,y],[b,x]]=t._bounds;t.overflow=[g<v?-1:g>y?1:0,_<b?-1:_>x?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;let S=t._active&&n.rubberband||[0,0];if(t.offset=c(t._bounds,t.offset,S),t.delta=a.sub(t.offset,m),this.computeMovement(),h&&(!t.last||i>B)){t.delta=a.sub(t.offset,m);let e=t.delta.map(Math.abs);a.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i],t.timeDelta=i)}}emit(){let e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;let r=this.handler(p(p(p({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function V([e,t],n){let r=Math.abs(e),i=Math.abs(t);if(r>i&&r>n)return`x`;if(i>r&&i>n)return`y`}var H=class extends te{constructor(...e){super(...e),d(this,`aliasKey`,`xy`)}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=a.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=a.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,n=this.config;if(!t.axis&&e){let r=typeof n.axisThreshold==`object`?n.axisThreshold[C(e)]:n.axisThreshold;t.axis=V(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case`x`:e[1]=0;break;case`y`:e[0]=0;break}}},ne=e=>e,re=.15,ie={enabled(e=!0){return e},eventOptions(e,t,n){return p(p({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[re,re];case!1:return[0,0];default:return a.toVector(e)}},from(e){if(typeof e==`function`)return e;if(e!=null)return a.toVector(e)},transform(e,t,n){let r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||ne},threshold(e){return a.toVector(e,0)}},ae=0,U=p(p({},ie),{},{axis(e,t,{axis:n}){if(this.lockDirection=n===`lock`,!this.lockDirection)return n},axisThreshold(e=ae){return e},bounds(e={}){if(typeof e==`function`)return t=>U.bounds(e(t));if(`current`in e)return()=>e.current;if(typeof HTMLElement==`function`&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),oe={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]},se=class extends H{constructor(...e){super(...e),d(this,`ingKey`,`dragging`)}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=U.bounds(r)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;let r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=A(e),n._pointerActive=!0,this.computeValues(j(e)),this.computeInitial(),t.preventScrollAxis&&C(e)!==`mouse`?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,n=this.config;if(!t._pointerActive)return;let r=A(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;let i=j(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=a.sub(i,t._values),this.computeValues(i)),a.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove(`dragDelay`),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis===`xy`){t._active=!1,this.clean();return}else{this.timeoutStore.remove(`startPointerDrag`),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}let t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;let r=A(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[i,a]=t._distance;if(t.tap=i<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{let[e,r]=t._delta,[i,a]=t._movement,[o,s]=n.swipe.velocity,[c,l]=n.swipe.distance,u=n.swipe.duration;if(t.elapsedTime<u){let n=Math.abs(e/t.timeDelta),u=Math.abs(r/t.timeDelta);n>o&&Math.abs(i)>c&&(t.swipe[0]=Math.sign(e)),u>s&&Math.abs(a)>l&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,`change`,this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,`end`,this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,`cancel`,this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,ce(e);let t=this.eventStore.add(this.sharedConfig.window,`touch`,`change`,this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,`touch`,`end`,t),this.eventStore.add(this.sharedConfig.window,`touch`,`cancel`,t),this.timeoutStore.add(`startPointerDrag`,this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add(`dragDelay`,()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=oe[e.key];if(t){let n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,a.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in oe&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,`start`,this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,`change`,this.pointerMove.bind(this)),e(t,`end`,this.pointerUp.bind(this)),e(t,`cancel`,this.pointerUp.bind(this)),e(`lostPointerCapture`,``,this.pointerUp.bind(this))),this.config.keys&&(e(`key`,`down`,this.keyDown.bind(this)),e(`key`,`up`,this.keyUp.bind(this))),this.config.filterTaps&&e(`click`,``,this.pointerClick.bind(this),{capture:!0,passive:!1})}};function ce(e){`persist`in e&&typeof e.persist==`function`&&e.persist()}var W=typeof window<`u`&&window.document&&window.document.createElement;function le(){return W&&`ontouchstart`in window}function ue(){return le()||W&&window.navigator.maxTouchPoints>1}function de(){return W&&`onpointerdown`in window}function fe(){return W&&`exitPointerLock`in window.document}function pe(){try{return`constructor`in GestureEvent}catch{return!1}}var G={isBrowser:W,gesture:pe(),touch:le(),touchscreen:ue(),pointer:de(),pointerLock:fe()},me=250,he=180,ge=.5,_e=50,ve=250,ye=10,be={mouse:0,touch:0,pen:8},xe=p(p({},U),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&G.pointerLock,G.touch&&n?`touch`:this.pointerLock?`mouse`:G.pointer&&!i?`pointer`:G.touch?`touch`:`mouse`},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n==`number`?n:n||n===void 0&&e?me:void 0,!(!G.touchscreen||n===!1))return e||(n===void 0?void 0:`y`)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device===`pointer`&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){let o=a.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,o},swipe({velocity:e=ge,distance:t=_e,duration:n=ve}={}){return{velocity:this.transform(a.toVector(e)),distance:this.transform(a.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return he;case!1:return 0;default:return e}},axisThreshold(e){return e?p(p({},be),e):be},keyboardDisplacement(e=ye){return e}});function Se(e){let[t,n]=e.overflow,[r,i]=e._delta,[a,o]=e._direction;(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&i>0&&o<0||n>0&&i<0&&o>0)&&(e._movement[1]=e._movementBound[1])}var Ce=30,we=100,Te=class extends te{constructor(...e){super(...e),d(this,`ingKey`,`pinching`),d(this,`aliasKey`,`da`)}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){let{type:e,movement:t,lastOffset:n}=this.state;e===`wheel`?this.state.offset=a.add(t,n):this.state.offset=[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){let{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){let e=this.state,[t,n]=e._movement;if(!e.axis){let r=Math.abs(t)*Ce-Math.abs(n);r<0?e.axis=`angle`:r>0&&(e.axis=`scale`)}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis===`scale`?e[1]=0:this.state.axis===`angle`&&(e[0]=0))}cancel(){let e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);let t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every(e=>n.has(e))||n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);let r=k(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);let t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every(e=>r.has(e))||(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);let i=D(...Array.from(n.values()));i&&this.pinchStart(e,i)}pinchStart(e,t){let n=this.state;n.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;let t=k(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){let t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;let n=D(...Array.from(t.values()));n&&this.pinchMove(e,n)}pinchMove(e,t){let n=this.state,r=n._values[1],i=t.angle-r,a=0;Math.abs(i)>270&&(a+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*a]),n.origin=t.origin,n.turns=a,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){let t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();let t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;let t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];let n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=a.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){let t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(t=>e[t]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add(`wheelEnd`,this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){`uv`in e||e.cancelable&&e.preventDefault();let t=this.state;t._delta=[-P(e)[1]/we*t.offset[0],0],a.addTo(t._movement,t._delta),Se(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){let t=this.config.device;t&&(e(t,`start`,this[t+`Start`].bind(this)),e(t,`change`,this[t+`Move`].bind(this)),e(t,`end`,this[t+`End`].bind(this)),e(t,`cancel`,this[t+`End`].bind(this)),e(`lostPointerCapture`,``,this[t+`End`].bind(this))),this.config.pinchOnWheel&&e(`wheel`,``,this.wheel.bind(this),{passive:!1})}},Ee=p(p({},ie),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!G.touch&&G.gesture)return`gesture`;if(G.touch&&r)return`touch`;if(G.touchscreen){if(G.pointer)return`pointer`;if(G.touch)return`touch`}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){let i=e=>{let t=z(L(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{let t=z(L(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return typeof n!=`function`&&typeof r!=`function`?[i(),a()]:e=>[i(e),a(e)]},threshold(e,t,n){return this.lockDirection=n.axis===`lock`,a.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?`ctrlKey`:e},pinchOnWheel(e=!0){return e}}),De=class extends H{constructor(...e){super(...e),d(this,`ingKey`,`moving`)}move(e){this.config.mouseOnly&&e.pointerType!==`mouse`||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add(`moveEnd`,this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(j(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;let t=j(e),n=this.state;n._delta=a.sub(t,n._values),a.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e(`pointer`,`change`,this.move.bind(this)),e(`pointer`,`leave`,this.moveEnd.bind(this))}},Oe=p(p({},U),{},{mouseOnly:(e=!0)=>e}),ke=class extends H{constructor(...e){super(...e),d(this,`ingKey`,`scrolling`)}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add(`scrollEnd`,this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();let t=this.state,n=F(e);t._delta=a.sub(n,t._values),a.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e(`scroll`,``,this.scroll.bind(this))}},Ae=U,je=class extends H{constructor(...e){super(...e),d(this,`ingKey`,`wheeling`)}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add(`wheelEnd`,this.wheelEnd.bind(this))}wheelChange(e){let t=this.state;t._delta=P(e),a.addTo(t._movement,t._delta),Se(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e(`wheel`,``,this.wheel.bind(this))}},Me=U,Ne=class extends H{constructor(...e){super(...e),d(this,`ingKey`,`hovering`)}enter(e){this.config.mouseOnly&&e.pointerType!==`mouse`||(this.start(e),this.computeValues(j(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!==`mouse`)return;let t=this.state;if(!t._active)return;t._active=!1;let n=j(e);t._movement=t._delta=a.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e(`pointer`,`enter`,this.enter.bind(this)),e(`pointer`,`leave`,this.leave.bind(this))}},Pe=p(p({},U),{},{mouseOnly:(e=!0)=>e}),K=new Map,Fe=new Map;function Ie(e){K.set(e.key,e.engine),Fe.set(e.key,e.resolver)}var Le={key:`drag`,engine:se,resolver:xe},Re={key:`hover`,engine:Ne,resolver:Pe},ze={key:`move`,engine:De,resolver:Oe},Be={key:`pinch`,engine:Te,resolver:Ee},Ve={key:`scroll`,engine:ke,resolver:Ae},He={key:`wheel`,engine:je,resolver:Me};function Ue(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function We(e,t){if(e==null)return{};var n=Ue(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Ge={target(e){if(e)return()=>`current`in e?e.current:e},enabled(e=!0){return e},window(e=G.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},Ke=[`target`,`eventOptions`,`window`,`enabled`,`transform`];function q(e={},t){let n={};for(let[r,i]of Object.entries(t))switch(typeof i){case`function`:n[r]=i.call(n,e[r],r,e);break;case`object`:n[r]=q(e[r],i);break;case`boolean`:i&&(n[r]=e[r]);break}return n}function qe(e,t,n={}){let r=e,{target:i,eventOptions:a,window:o,enabled:s,transform:c}=r,l=We(r,Ke);if(n.shared=q({target:i,eventOptions:a,window:o,enabled:s,transform:c},Ge),t){let e=Fe.get(t);n[t]=q(p({shared:n.shared},l),e)}else for(let e in l){let t=Fe.get(e);t&&(n[e]=q(p({shared:n.shared},l[e]),t))}return n}var Je=class{constructor(e,t){d(this,`_listeners`,new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){let a=this._listeners,o=x(t,n),s=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=p(p({},s),i);e.addEventListener(o,r,c);let l=()=>{e.removeEventListener(o,r,c),a.delete(l)};return a.add(l),l}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}},Ye=class{constructor(){d(this,`_timeouts`,new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}},Xe=class{constructor(e){d(this,`gestures`,new Set),d(this,`_targetEventStore`,new Je(this)),d(this,`gestureEventStores`,{}),d(this,`gestureTimeoutStores`,{}),d(this,`handlers`,{}),d(this,`config`,{}),d(this,`pointerIds`,new Set),d(this,`touchIds`,new Set),d(this,`state`,{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Ze(this,e)}setEventIds(e){if(S(e))return this.touchIds=new Set(O(e)),this.touchIds;if(`pointerId`in e)return e.type===`pointerup`||e.type===`pointercancel`?this.pointerIds.delete(e.pointerId):e.type===`pointerdown`&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=qe(e,t,this.config)}clean(){this._targetEventStore.clean();for(let e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let t=this.config.shared,n={},r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(let t of this.gestures){let i=this.config[t],a=Qe(n,i.eventOptions,!!r);i.enabled&&new(K.get(t))(this,e,t).bind(a)}let i=Qe(n,t.eventOptions,!!r);for(let t in this.nativeHandlers)i(t,``,n=>this.nativeHandlers[t](p(p({},this.state.shared),{},{event:n,args:e})),void 0,!0)}for(let e in n)n[e]=R(...n[e]);if(!r)return n;for(let e in n){let{device:t,capture:i,passive:a}=b(e);this._targetEventStore.add(r,t,``,n[e],{capture:i,passive:a})}}}};function J(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Je(e,t),e.gestureTimeoutStores[t]=new Ye}function Ze(e,t){t.drag&&J(e,`drag`),t.wheel&&J(e,`wheel`),t.scroll&&J(e,`scroll`),t.move&&J(e,`move`),t.pinch&&J(e,`pinch`),t.hover&&J(e,`hover`)}var Qe=(e,t,n)=>(r,i,a,o={},s=!1)=>{let c=o.capture??t.capture,l=o.passive??t.passive,u=s?r:v(r,i,c);n&&l&&(u+=`Passive`),e[u]=e[u]||[],e[u].push(a)},$e=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function et(e){let t={},n={},r=new Set;for(let i in e)$e.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}function Y(e,t,n,r,i,a){if(!e.has(n)||!K.has(r))return;let o=n+`Start`,s=n+`End`;i[r]=e=>{let r;return e.first&&o in t&&t[o](e),n in t&&(r=t[n](e)),e.last&&s in t&&t[s](e),r},a[r]=a[r]||{}}function tt(e,t){let[n,r,i]=et(e),a={};return Y(i,n,`onDrag`,`drag`,a,t),Y(i,n,`onWheel`,`wheel`,a,t),Y(i,n,`onScroll`,`scroll`,a,t),Y(i,n,`onPinch`,`pinch`,a,t),Y(i,n,`onMove`,`move`,a,t),Y(i,n,`onHover`,`hover`,a,t),{handlers:a,config:t,nativeHandlers:r}}function nt(e,t={},n,i){let a=r.useMemo(()=>new Xe(e),[]);if(a.applyHandlers(e,i),a.applyConfig(t,n),r.useEffect(a.effect.bind(a)),r.useEffect(()=>a.clean.bind(a),[]),t.target===void 0)return a.bind.bind(a)}function rt(e){return e.forEach(Ie),function(e,t){let{handlers:n,nativeHandlers:r,config:i}=tt(e,t||{});return nt(n,i,void 0,r)}}function it(e,t){return rt([Le,Be,Ve,He,ze,Re])(e,t||{})}var at=`/Happy-Birthday-Love/assets/Screenshot_2023-08-31-12-05-39-05-JIZ79EpV.jpg`,ot=`/Happy-Birthday-Love/assets/IMG-20231005-WA0001-BSg6bb92.jpg`,st=`/Happy-Birthday-Love/assets/Screenshot_2023-10-06-09-03-06-90-BnVQFoob.jpg`,ct=`/Happy-Birthday-Love/assets/Screenshot_2023-11-12-19-15-02-26-B-y_5Oqi.jpg`,lt=`/Happy-Birthday-Love/assets/Screenshot_2023-12-07-22-26-03-96-DhSvOhX5.jpg`,ut=`/Happy-Birthday-Love/assets/Screenshot_2024-01-12-16-49-25-25-DRxLyJ51.jpg`,dt=`/Happy-Birthday-Love/assets/Screenshot_2024-04-10-23-39-49-061-TbqN2sLy.jpg`,ft=`/Happy-Birthday-Love/assets/Screenshot_2024-04-10-23-39-49-062-Bm5JZyfW.jpg`,pt=`/Happy-Birthday-Love/assets/Screenshot_2024-04-10-23-39-49-063-C5DG3z1p.jpg`,mt=`/Happy-Birthday-Love/assets/Screenshot_2025-09-29-18-54-34-66-CgoPHCoV.jpg`,X=t(n()),ht=[{src:at,alt:`Rakhi celebrations photo`},{src:ot,alt:`Queen pose`},{src:st,alt:`you trying to be cute`},{src:ct,alt:`dewali celebrations photo`},{src:lt,alt:`you and your friend`},{src:ut,alt:`dusherra celebrations in clg`},{src:dt,alt:`I am going to fall in love`},{src:ft,alt:`you look so beautiful`},{src:pt,alt:`you are same as that flower`},{src:mt,alt:`my very first video of you`}],Z={maxVerticalRotationDeg:5,dragSensitivity:20,enlargeTransitionMs:300,segments:35},Q=(e,t,n)=>Math.min(Math.max(e,t),n),gt=e=>(e%360+360)%360,_t=e=>((e+180)%360+360)%360-180,$=(e,t,n)=>{let r=e.dataset[t]??e.getAttribute(`data-${t}`),i=r==null?NaN:parseFloat(r);return Number.isFinite(i)?i:n};function vt(e,t){let n=Array.from({length:t},(e,t)=>-37+t*2),r=[-4,-2,0,2,4],i=[-3,-1,1,3,5],a=n.flatMap((e,t)=>(t%2==0?r:i).map(t=>({x:e,y:t,sizeX:2,sizeY:2}))),o=a.length;if(e.length===0)return a.map(e=>({...e,src:``,alt:``}));e.length>o&&console.warn(`[DomeGallery] Provided image count (${e.length}) exceeds available tiles (${o}). Some images will not be shown.`);let s=e.map(e=>typeof e==`string`?{src:e,alt:``}:{src:e.src||``,alt:e.alt||``}),c=Array.from({length:o},(e,t)=>s[t%s.length]);for(let e=1;e<c.length;e++)if(c[e].src===c[e-1].src){for(let t=e+1;t<c.length;t++)if(c[t].src!==c[e].src){let n=c[e];c[e]=c[t],c[t]=n;break}}return a.map((e,t)=>({...e,src:c[t].src,alt:c[t].alt}))}function yt(e,t,n,r,i){let a=360/i/2,o=a*(e+(n-1)/2);return{rotateX:a*(t-(r-1)/2),rotateY:o}}function bt({images:e=ht,fit:t=.5,fitBasis:n=`auto`,minRadius:i=600,maxRadius:a=1/0,padFactor:o=.25,overlayBlurColor:s=`#060010`,maxVerticalRotationDeg:c=Z.maxVerticalRotationDeg,dragSensitivity:l=Z.dragSensitivity,enlargeTransitionMs:u=Z.enlargeTransitionMs,segments:d=Z.segments,dragDampening:f=2,openedImageWidth:p=`250px`,openedImageHeight:m=`350px`,imageBorderRadius:h=`30px`,openedImageBorderRadius:g=`30px`,grayscale:_=!0}){let v=(0,r.useRef)(null),y=(0,r.useRef)(null),b=(0,r.useRef)(null),x=(0,r.useRef)(null),S=(0,r.useRef)(null),C=(0,r.useRef)(null),w=(0,r.useRef)(null),T=(0,r.useRef)(null),E=(0,r.useRef)({x:0,y:0}),D=(0,r.useRef)({x:0,y:0}),O=(0,r.useRef)(null),k=(0,r.useRef)(!1),A=(0,r.useRef)(!1),j=(0,r.useRef)(null),M=(0,r.useRef)(!1),N=(0,r.useRef)(0),P=(0,r.useRef)(0),F=(0,r.useRef)(!1),I=(0,r.useCallback)(()=>{F.current||(F.current=!0,document.body.classList.add(`dg-scroll-lock`))},[]),L=(0,r.useCallback)(()=>{F.current&&v.current?.getAttribute(`data-enlarging`)!==`true`&&(F.current=!1,document.body.classList.remove(`dg-scroll-lock`))},[]),ee=(0,r.useMemo)(()=>vt(e,d),[e,d]),R=(e,t)=>{let n=b.current;n&&(n.style.transform=`translateZ(calc(var(--radius) * -1)) rotateX(${e}deg) rotateY(${t}deg)`)},z=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=v.current;if(!e)return;let r=new ResizeObserver(r=>{let c=r[0].contentRect,l=Math.max(1,c.width),u=Math.max(1,c.height),d=Math.min(l,u),f=Math.max(l,u),v=l/u,b;switch(n){case`min`:b=d;break;case`max`:b=f;break;case`width`:b=l;break;case`height`:b=u;break;default:b=v>=1.3?l:d}let C=b*t,w=u*1.35;C=Math.min(C,w),C=Q(C,i,a),z.current=Math.round(C);let T=Math.max(8,Math.round(d*o));e.style.setProperty(`--radius`,`${z.current}px`),e.style.setProperty(`--viewer-pad`,`${T}px`),e.style.setProperty(`--overlay-blur-color`,s),e.style.setProperty(`--tile-radius`,h),e.style.setProperty(`--enlarge-radius`,g),e.style.setProperty(`--image-filter`,_?`grayscale(1)`:`none`),R(E.current.x,E.current.y);let D=S.current?.querySelector(`.enlarge`);if(D&&x.current&&y.current){let e=x.current.getBoundingClientRect(),t=y.current.getBoundingClientRect();if(p&&m){let n=document.createElement(`div`);n.style.cssText=`position: absolute; width: ${p}; height: ${m}; visibility: hidden;`,document.body.appendChild(n);let r=n.getBoundingClientRect();document.body.removeChild(n);let i=e.left-t.left+(e.width-r.width)/2,a=e.top-t.top+(e.height-r.height)/2;D.style.left=`${i}px`,D.style.top=`${a}px`}else D.style.left=`${e.left-t.left}px`,D.style.top=`${e.top-t.top}px`,D.style.width=`${e.width}px`,D.style.height=`${e.height}px`}});return r.observe(e),()=>r.disconnect()},[t,n,i,a,o,s,_,h,g,p,m]),(0,r.useEffect)(()=>{R(E.current.x,E.current.y)},[]);let B=(0,r.useCallback)(()=>{j.current&&=(cancelAnimationFrame(j.current),null)},[]),te=(0,r.useCallback)((e,t)=>{let n=1.4,r=Q(e,-n,n)*80,i=Q(t,-n,n)*80,a=0,o=Q(f??.6,0,1),s=.94+.055*o,l=.015-.01*o,u=Math.round(90+270*o),d=()=>{if(r*=s,i*=s,Math.abs(r)<l&&Math.abs(i)<l){j.current=null;return}if(++a>u){j.current=null;return}let e=Q(E.current.x-i/200,-c,c),t=_t(E.current.y+r/200);E.current={x:e,y:t},R(e,t),j.current=requestAnimationFrame(d)};B(),j.current=requestAnimationFrame(d)},[f,c,B]);it({onDragStart:({event:e})=>{if(w.current)return;B();let t=e;k.current=!0,A.current=!1,D.current={...E.current},O.current={x:t.clientX,y:t.clientY}},onDrag:({event:e,last:t,velocity:n=[0,0],direction:r=[0,0],movement:i})=>{if(w.current||!k.current||!O.current)return;let a=e,o=a.clientX-O.current.x,s=a.clientY-O.current.y;A.current||o*o+s*s>16&&(A.current=!0);let u=Q(D.current.x-s/l,-c,c),d=_t(D.current.y+o/l);if((E.current.x!==u||E.current.y!==d)&&(E.current={x:u,y:d},R(u,d)),t){k.current=!1;let[e,t]=n,[a,o]=r,s=e*a,c=t*o;if(Math.abs(s)<.001&&Math.abs(c)<.001&&Array.isArray(i)){let[e,t]=i;s=Q(e/l*.02,-1.2,1.2),c=Q(t/l*.02,-1.2,1.2)}(Math.abs(s)>.005||Math.abs(c)>.005)&&te(s,c),A.current&&(P.current=performance.now()),A.current=!1}}},{target:y,eventOptions:{passive:!0}}),(0,r.useEffect)(()=>{let e=C.current;if(!e)return;let t=()=>{if(performance.now()-N.current<250)return;let e=w.current;if(!e)return;let t=e.parentElement,n=S.current?.querySelector(`.enlarge`);if(!n)return;let r=t.querySelector(`.item__image--reference`),i=T.current;if(!i){n.remove(),r&&r.remove(),t.style.setProperty(`--rot-y-delta`,`0deg`),t.style.setProperty(`--rot-x-delta`,`0deg`),e.style.visibility=``,e.style.zIndex=0,w.current=null,v.current?.removeAttribute(`data-enlarging`),M.current=!1,L();return}let a=n.getBoundingClientRect(),o=v.current.getBoundingClientRect(),s={left:i.left-o.left,top:i.top-o.top,width:i.width,height:i.height},c={left:a.left-o.left,top:a.top-o.top,width:a.width,height:a.height},l=document.createElement(`div`);l.className=`enlarge-closing`,l.style.cssText=`position:absolute;left:${c.left}px;top:${c.top}px;width:${c.width}px;height:${c.height}px;z-index:9999;border-radius: var(--enlarge-radius, 32px);overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35);transition:all ${u}ms ease-out;pointer-events:none;margin:0;transform:none;`;let d=n.querySelector(`img`);if(d){let e=d.cloneNode();e.style.cssText=`width:100%;height:100%;object-fit:cover;`,l.appendChild(e)}n.remove(),v.current.appendChild(l),l.getBoundingClientRect(),requestAnimationFrame(()=>{l.style.left=s.left+`px`,l.style.top=s.top+`px`,l.style.width=s.width+`px`,l.style.height=s.height+`px`,l.style.opacity=`0`}),l.addEventListener(`transitionend`,()=>{l.remove(),T.current=null,r&&r.remove(),t.style.transition=`none`,e.style.transition=`none`,t.style.setProperty(`--rot-y-delta`,`0deg`),t.style.setProperty(`--rot-x-delta`,`0deg`),requestAnimationFrame(()=>{e.style.visibility=``,e.style.opacity=`0`,e.style.zIndex=0,w.current=null,v.current?.removeAttribute(`data-enlarging`),requestAnimationFrame(()=>{t.style.transition=``,e.style.transition=`opacity 300ms ease-out`,requestAnimationFrame(()=>{e.style.opacity=`1`,setTimeout(()=>{e.style.transition=``,e.style.opacity=``,M.current=!1,!k.current&&v.current?.getAttribute(`data-enlarging`)!==`true`&&document.body.classList.remove(`dg-scroll-lock`)},300)})})})},{once:!0})};e.addEventListener(`click`,t);let n=e=>{e.key===`Escape`&&t()};return window.addEventListener(`keydown`,n),()=>{e.removeEventListener(`click`,t),window.removeEventListener(`keydown`,n)}},[u,L]);let V=(0,r.useCallback)(e=>{if(M.current)return;M.current=!0,N.current=performance.now(),I();let t=e.parentElement;w.current=e,e.setAttribute(`data-focused`,`true`);let n=$(t,`offsetX`,0),r=$(t,`offsetY`,0),i=$(t,`sizeX`,2),a=$(t,`sizeY`,2),o=yt(n,r,i,a,d),s=gt(o.rotateY),c=gt(E.current.y),l=-(s+c)%360;l<-180&&(l+=360);let f=-o.rotateX-E.current.x;t.style.setProperty(`--rot-y-delta`,`${l}deg`),t.style.setProperty(`--rot-x-delta`,`${f}deg`);let h=document.createElement(`div`);h.className=`item__image item__image--reference`,h.style.opacity=`0`,h.style.transform=`rotateX(${-o.rotateX}deg) rotateY(${-o.rotateY}deg)`,t.appendChild(h);let g=h.getBoundingClientRect(),_=y.current.getBoundingClientRect(),b=x.current.getBoundingClientRect();T.current={left:g.left,top:g.top,width:g.width,height:g.height},e.style.visibility=`hidden`,e.style.zIndex=0;let C=document.createElement(`div`);C.className=`enlarge`,C.style.position=`absolute`,C.style.left=b.left-_.left+`px`,C.style.top=b.top-_.top+`px`,C.style.width=b.width+`px`,C.style.height=b.height+`px`,C.style.opacity=`0`,C.style.zIndex=`30`,C.style.willChange=`transform, opacity`,C.style.transformOrigin=`top left`,C.style.transition=`transform ${u}ms ease, opacity ${u}ms ease`;let D=t.dataset.src||e.querySelector(`img`)?.src||``,O=document.createElement(`img`);O.src=D,C.appendChild(O),S.current.appendChild(C);let k=g.left-b.left,A=g.top-b.top,j=g.width/b.width,P=g.height/b.height;if(C.style.transform=`translate(${k}px, ${A}px) scale(${j}, ${P})`,requestAnimationFrame(()=>{C.style.opacity=`1`,C.style.transform=`translate(0px, 0px) scale(1,1)`,v.current?.setAttribute(`data-enlarging`,`true`)}),p||m){let e=t=>{if(t.propertyName!==`transform`)return;C.removeEventListener(`transitionend`,e);let n=C.style.transition;C.style.transition=`none`;let r=p||`${b.width}px`,i=m||`${b.height}px`;C.style.width=r,C.style.height=i;let a=C.getBoundingClientRect();C.style.width=b.width+`px`,C.style.height=b.height+`px`,C.offsetWidth,C.style.transition=`left ${u}ms ease, top ${u}ms ease, width ${u}ms ease, height ${u}ms ease`;let o=b.left-_.left+(b.width-a.width)/2,s=b.top-_.top+(b.height-a.height)/2;requestAnimationFrame(()=>{C.style.left=`${o}px`,C.style.top=`${s}px`,C.style.width=r,C.style.height=i});let c=()=>{C.removeEventListener(`transitionend`,c),C.style.transition=n};C.addEventListener(`transitionend`,c,{once:!0})};C.addEventListener(`transitionend`,e)}},[u,I,m,p,d]),H=(0,r.useCallback)(e=>{k.current||performance.now()-P.current<80||M.current||V(e.currentTarget)},[V]),ne=(0,r.useCallback)(e=>{e.pointerType===`touch`&&(k.current||performance.now()-P.current<80||M.current||V(e.currentTarget))},[V]),re=(0,r.useCallback)(e=>{k.current||performance.now()-P.current<80||M.current||V(e.currentTarget)},[V]);return(0,r.useEffect)(()=>()=>{document.body.classList.remove(`dg-scroll-lock`)},[]),(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(`div`,{ref:v,className:`sphere-root`,style:{"--segments-x":d,"--segments-y":d,"--overlay-blur-color":s,"--tile-radius":h,"--enlarge-radius":g,"--image-filter":_?`grayscale(1)`:`none`},children:(0,X.jsxs)(`main`,{ref:y,className:`sphere-main`,children:[(0,X.jsx)(`div`,{className:`stage`,children:(0,X.jsx)(`div`,{ref:b,className:`sphere`,children:ee.map((e,t)=>(0,X.jsx)(`div`,{className:`item`,"data-src":e.src,"data-offset-x":e.x,"data-offset-y":e.y,"data-size-x":e.sizeX,"data-size-y":e.sizeY,style:{"--offset-x":e.x,"--offset-y":e.y,"--item-size-x":e.sizeX,"--item-size-y":e.sizeY},children:(0,X.jsx)(`div`,{className:`item__image`,role:`button`,tabIndex:0,"aria-label":e.alt||`Open image`,onClick:H,onPointerUp:ne,onTouchEnd:re,children:(0,X.jsx)(`img`,{src:e.src,draggable:!1,alt:e.alt,loading:`lazy`,decoding:`async`})})},`${e.x},${e.y},${t}`))})}),(0,X.jsx)(`div`,{className:`overlay`}),(0,X.jsx)(`div`,{className:`overlay overlay--blur`}),(0,X.jsx)(`div`,{className:`edge-fade edge-fade--top`}),(0,X.jsx)(`div`,{className:`edge-fade edge-fade--bottom`}),(0,X.jsxs)(`div`,{className:`viewer`,ref:S,children:[(0,X.jsx)(`div`,{ref:C,className:`scrim`}),(0,X.jsx)(`div`,{ref:x,className:`frame`})]})]})})})}function xt(){return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(`h1`,{className:`dome-title`,children:`My Treasure`}),(0,X.jsx)(`div`,{className:`dome-component-wrapper`,children:(0,X.jsx)(bt,{grayscale:!1,overlayBlurColor:`transparent`,maxVerticalRotationDeg:0,minRadius:800})})]})}export{xt as default};